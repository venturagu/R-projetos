data()
iris
CO2
install.packages("dslabs")
murders
str(murders)
library(dslabs)
data(murders)
murders
class(murders)
str(murders)
str(murders)
library(dslabs)
data(murders)
murders
class(murders)
x<-murders
x<-5
str(murders)
murders[1,]
murders[,1]
View(murders)
murders&state
state.abb
murders$state
pais<- c('Itália', 'Canada', 'Egito')
seq(1, 10, 2)
seq(from = 1, to = 10, by = 2)
which(murders$total == 2)
which(murders$population ==max(murders$population))
murders$population
pop<-murders$population
pop<-sort(pop)
pop
pop[1]
pop[1]
pop[-1]
murders[which(murders$population==pop[1]),]
murders[which(murders$population==pop[1])]
murders[which(murders$population==pop[1]),]
murders$population[pop[1]]
murders[pop[1],]
murders[p[1],]
#carregar dataset:
View(murders)
library(dplyr)
library(ggplot2)
library(dslabs)
# pista visuais são
#elementos que vamos colocando no nosso grafo para melhor visualização
#carregar dataset:
View(murders) # visualizar dataset
ggplot(data = murders)
p <- ggplot(data = murders)
class(p)
ggplot(data = murders) +
geom_point(aes(x = population/10^6),
y = total)
a escala da população para melhor visualização dividindo por 10/6
ggplot(data = murders) +
geom_point(aes(x = population/10^6),
y = total))
#vamos dimuir a escala da população para melhor visualização dividindo por 10/6
ggplot(data = murders) +
geom_point(aes(x = population/10^6,
y = total))
ggplot(data = murders) + geom_point(aes(x = population/10^6, y = total)) +
geom_text(aes(x = population/10^6, y = total, label = abb))
ggplot(data = murders) + geom_point(aes(x = population/10^6, y = total), size = 3) +
geom_text(aes(x = population/10^6, y = total, label = abb))
ggplot(data = murders) + geom_point(aes(x = population/10^6, y = total), size = 3) +
geom_text(aes(x = population/10^6, y = total, label = abb), nudge_x = 1)
ggplot(data = murders) + geom_point(aes(x = population/10^6, y = total), size = 3) +
geom_text(aes(x = population/10^6, y = total, label = abb), nudge_x = 1)
ggplot(data = murders) + geom_point(aes(x = population/10^6, y = total), size = 3) +
geom_text(aes(x = population/10^6, y = total, label = abb), nudge_x = 0.05)
ggplot(data = murders) + geom_point(aes(x = population/10^6, y = total), size = 3) +
geom_text(aes(x = population/10^6, y = total, label = abb), nudge_x = 0.05) +
scale_x_continuous(trans = "log10") +
scale_y_continuous(trans = "log10")
setwd("~/Documents/topicos_BD/Projeto1 - Crimes in Boston")
library(dplyr)
library(ggplot2)
library(dslabs)
crimes <- read.csv("crime.csv", sep=",")
ncol(crimes)
nrow(crimes)
# Filtro todos os crimes relacionado a homicidio, drogas e roubo
crimeFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide" | OFFENSE_CODE_GROUP == "Drug Violation" | OFFENSE_CODE_GROUP == "Larceny")
crimesEspecificos <- factor(crimeFilter)
crimeFilterTable <- table(crimesEspecificos)
convertedCrime <- as.data.frame(crimeFilterTable)
ggplot(convertedCrime, aes(x = OFFENSE_CODE_GROUP, y = Freq, colour = OFFENSE_CODE_GROUP)) +
geom_point()
ggplot(convertedCrime, aes(x = Hour, y = Freq, colour = OFFENSE_CODE_GROUP)) +
geom_point()
# Filtro todos os crimes relacionado a homicidio, drogas e roubo
crimeFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide" | OFFENSE_CODE_GROUP == "Drug Violation" | OFFENSE_CODE_GROUP == "Larceny")
crimesEspecificos <- factor(crimeFilter$OFFENSE_CODE_GROUP)
crimeFilterTable <- table(crimesEspecificos)
convertedCrime <- as.data.frame(crimeFilterTable)
ggplot(convertedCrime, aes(x = Hour, y = Freq, colour = OFFENSE_CODE_GROUP)) +
geom_point()
crimesEspecificos
ggplot(convertedCrime, aes(x = crimesEspecificos, y = Freq, colour = OFFENSE_CODE_GROUP)) +
geom_point()
ggplot(convertedCrime, aes(x = crimesEspecificos, y = Freq, colour = crimesEspecificos)) +
geom_point()
head(convertedCrime, n =2)
head(convertedCrime, n =3)
head(convertedCrime, n =4)
crimesEspecificos
table(crimeFilter)
crimeFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide" | OFFENSE_CODE_GROUP == "Drug Violation" | OFFENSE_CODE_GROUP == "Larceny")
solution<-as.data.frame(table(unlist(crimeFilter)))
solution
View(solution)
# Filtro todos os crimes relacionado a homicidio, drogas e roubo
crimeFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide" | OFFENSE_CODE_GROUP == "Drug Violation" | OFFENSE_CODE_GROUP == "Larceny")
solution<-as.data.frame(table(unlist(crimeFilter$HOUR)))
View(solution)
# Filtro todos os crimes relacionado a homicidio, drogas e roubo
homicideFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide")
drugFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Drug Violation")
larcenyFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Larceny")
homicide<-as.data.frame(table(unlist(homicideFilter$HOUR)))
drug<-as.data.frame(table(unlist(drugFilter$HOUR)))
larceny<-as.data.frame(table(unlist(larcenyFilter$HOUR)))
View(homicide)
str(homicide)
# Filtro todos os crimes relacionado a homicidio, drogas e roubo
homicideFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide")
drugFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Drug Violation")
larcenyFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Larceny")
homicide<-as.data.frame(table(unlist(homicideFilter$HOUR)))
drug<-as.data.frame(table(unlist(drugFilter$HOUR)))
larceny<-as.data.frame(table(unlist(larcenyFilter$HOUR)))
str(homicide)
df_crimes <- data.frame(Hour = homicide$Var1, Homocide = homicide$Freq, Drug_Violation = drug$Freq, Larceny = larceny$Freq )
View(df_crimes)
ggplot(df_crimes, aes(x=hour, y=value, fill=variable)) + geom_bar(stat='identity')
ggplot(df_crimes, aes(x=Hour, y=value, fill=variable)) + geom_bar(stat='identity')
# melt a data.frame
library(reshape2)
#when you melt essentially you create only one column with the value
#and one column with the variable i.e. your others columns
df <- melt(df_crimes, id.vars='Hour')
ggplot(df, aes(x=m, y=value, fill=variable)) +
geom_bar(stat='identity', position='dodge')
df_crimes <- data.frame(Hour = homicide$Var1, Homocide = homicide$Freq, Drug_Violation = drug$Freq, Larceny = larceny$Freq )
View(df_crimes)
#when you melt essentially you create only one column with the value
#and one column with the variable i.e. your others columns
df <- melt(df_crimes, id.vars='Hour')
ggplot(df, aes(x=Hour, y=value, fill=variable)) +
geom_bar(stat='identity', position='dodge')
# Filtro todos os crimes relacionado a homicidio, drogas e roubo
homicideFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide")
drugFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Drug Violation")
larcenyFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Larceny")
homicide_hour<-as.data.frame(table(unlist(homicideFilter$HOUR)))
drug_hour<-as.data.frame(table(unlist(drugFilter$HOUR)))
larceny_hour<-as.data.frame(table(unlist(larcenyFilter$HOUR)))
homicide_day_of_week<-as.data.frame(table(unlist(homicideFilter$DAY_OF_WEEK)))
drug_day_of_week<-as.data.frame(table(unlist(drugFilter$DAY_OF_WEEK)))
larceny_day_of_week<-as.data.frame(table(unlist(larcenyFilter$DAY_OF_WEEK)))
df_crimes_hour <- data.frame(Hour = homicide_hour$Var1, Homocide = homicide_hour$Freq, Drug_Violation = drug_hour$Freq, Larceny = larceny_hour$Freq )
df_crimes_day_of_week <- data.frame(Hour = homicide_day_of_week$Var1, Homocide = homicide_day_of_week$Freq, Drug_Violation = drug_day_of_week$Freq, Larceny = larceny_day_of_week$Freq )
View(df_crimes)
#when you melt essentially you create only one column with the value
#and one column with the variable i.e. your others columns
df_hour <- melt(df_crimes_hour, id.vars='Hour')
df_day_of_week <- melt(df_crimes_day_of_week, id.vars='Hour')
ggplot(df_hour, aes(x=Hour, y=value, fill=variable)) +
geom_bar(stat='identity', position='dodge')
ggplot(df_day_of_week, aes(x=Hour, y=value, fill=variable)) +
geom_bar(stat='identity', position='dodge')
ggplot(df_day_of_week, aes(x=Hour, y=value, fill=variable)) +
geom_bar(stat='identity')
is.na(crimes)
vandalism <- filter(crimes, OFFENSE_DESCRIPTION == "VANDALISM")
vandalism
#Nesse decidimos aplicar algo para calcular frequencia de dados nominais/ordinais
#Chamados com mais frequencia
categorias_de_crimes <- factor(crimes$OFFENSE_CODE_GROUP)
categorias_de_crimes
categoryTable <- table(categorias_de_crimes)
converted <- as.data.frame(categoryTable)
crimes_mais_cometidos <- filter(converted, Freq > 15000)
crimes_mais_cometidos
ggplot(crimes_mais_cometidos ,aes(x = categorias_de_crimes, y = Freq)) +
geom_point() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
library("tidyr")
library(dplyr)
library(ggplot2)
library(dslabs)
library(reshape2) # melt a data.frame
# setwd("~/Documents/R aulas/projeto1")
# ------------------------------------ Leitura do CSV --------------------------
crimes <- read.csv("crime.csv", sep=",", na.strings = c('','NA','na','N/A','n/a','NaN','nan'))
nrow(crimes)
ncol(crimes)
dim(crimes)
View(head(crimes, n=100))
str(crimes)
View(sapply(crimes, function(x) sum(is.na(x))))
min(crimes$OCCURRED_ON_DATE)
max(crimes$OCCURRED_ON_DATE)
head(crimes$YEAR, 10)
tail(crimes$YEAR, 10)
data_2015_2010<- filter(crimes, YEAR%in%c(2015, 2010))
maior_lat = max(crimes$Lat, na.rm=T)
menor_lat = min(crimes$Lat, na.rm=T)
maior_long = max(crimes$Long, na.rm=T)
menor_long = min(crimes$Long, na.rm=T)
# Mapa dos crimes agrupado por distrito de Boston
ggplot(crimes, aes(x = Long, y = Lat, group=DISTRICT, colour = DISTRICT))+
geom_point(size = 1, alpha = 1) +
xlim(-71.15,-70.90) +
ylim(42.2,42.4) +
ggtitle("Crimes ocorridos na região de Boston separado por distritos")
#Nesse decidimos aplicar algo para calcular frequencia de dados nominais/ordinais
#Chamados com mais frequencia
categorias_de_crimes <- factor(crimes$OFFENSE_CODE_GROUP)
categorias_de_crimes
categoryTable <- table(categorias_de_crimes)
converted <- as.data.frame(categoryTable)
crimes_mais_cometidos <- filter(converted, Freq > 15000)
crimes_mais_cometidos
ggplot(crimes_mais_cometidos ,aes(x = categorias_de_crimes, y = Freq)) +
geom_point() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
#Distritos com mais ocorrencias
distritos <- factor(crimes$DISTRICT)
distritosTable <- table(distritos)
convertedDistrict <- as.data.frame(distritosTable)
convertedDistrict
ggplot(convertedDistrict, aes(x = distritos, y = Freq)) +
geom_point()
# Identificar todos os tipos de crimes presentes
unique(crimes$OFFENSE_CODE_GROUP)
# Filtro de todos os crimes relacionado a homicidio, drogas e roubo
homicideFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Homicide")
drugFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Drug Violation")
larcenyFilter <- filter(crimes, OFFENSE_CODE_GROUP == "Larceny")
# Tabela de quantidade de crimes de homicidio, drogas e roubo por hora do dia
homicide_hour<-as.data.frame(table(unlist(homicideFilter$HOUR)))
drug_hour<-as.data.frame(table(unlist(drugFilter$HOUR)))
larceny_hour<-as.data.frame(table(unlist(larcenyFilter$HOUR)))
# Tabela de quantidade de crimes de homicidio, drogas e roubo por dia da semana
homicide_day_of_week<-as.data.frame(table(unlist(homicideFilter$DAY_OF_WEEK)))
drug_day_of_week<-as.data.frame(table(unlist(drugFilter$DAY_OF_WEEK)))
larceny_day_of_week<-as.data.frame(table(unlist(larcenyFilter$DAY_OF_WEEK)))
# Criando dataframes estruturado por horas e dias da semana para os crimes filtrados
df_crimes_hour <- data.frame(Hour = homicide_hour$Var1, Homocide = homicide_hour$Freq, Drug_Violation = drug_hour$Freq, Larceny = larceny_hour$Freq )
df_crimes_day_of_week <- data.frame(Hour = homicide_day_of_week$Var1, Homocide = homicide_day_of_week$Freq, Drug_Violation = drug_day_of_week$Freq, Larceny = larceny_day_of_week$Freq )
View(df_crimes)
#when you melt essentially you create only one column with the value
#and one column with the variable i.e. your others columns
df_hour <- melt(df_crimes_hour, id.vars='Hour')
df_day_of_week <- melt(df_crimes_day_of_week, id.vars='Hour')
# Grafico de barras crimes filtrados por hora e por dia da semana
ggplot(df_hour, aes(x=Hour, y=value, fill=variable)) +
geom_bar(stat='identity', position='dodge')
ggplot(df_day_of_week, aes(x=Hour, y=value, fill=variable)) +
geom_bar(stat='identity', position='dodge')
